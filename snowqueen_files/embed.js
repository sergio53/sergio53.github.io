!function(){function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){return r(t[s][1][e]||e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}return e}()({1:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e,t){return new(function(){function t(e,n){i(this,t),this.context=e,this.url=n,this.init()}return r(t,[{key:"init",value:function(){document.addEventListener("pw:customer_events:event",function(t){var n=t.detail;n&&e.utilites.setStataData(n)}),this.url&&this.includeEmbed()}},{key:"includeEmbed",value:function(){var e=this;return new Promise(function(t,n){document.addEventListener("pw:custom_handlers:ready",function(e){t(e.detail)}),e.scriptEmbed()})}},{key:"scriptEmbed",value:function(){var t=document.createElement("script"),n=document.getElementsByTagName("script")[0];t.type="text/javascript",t.src=this.url,t.async=!0,n.parentNode.insertBefore(t,n),e.utilites.customEvents("pw:custom_handlers:embed",!0)}}]),t}())(e,t)}},{}],2:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){i(this,t)}return r(t,[{key:"createDevice",value:function(){return new Promise(function(e){e()})}},{key:"get",value:function(t){var n=this;if(e.isPromise()){this.createDevice().then(function(){return e.utilites.createIframe({src:""+e.api.device,id:""+e.namespace.iframe})}).then(function(e){e.addEventListener("load",function(){n.messageListener(e,t)},!1)})}else{var i=e.utilites.createIframe({src:""+e.api.device,id:""+e.namespace.iframe});i.addEventListener("load",function(){n.messageListener(i,t)},!1)}}},{key:"messageListener",value:function(t,n){var i=this,r=new MessageChannel,o=t.contentWindow;e.utilites.debugConsole({name:"Debug (class Deviceid) -> messageListener",params:{api:e.api,iframe:t},time:!0}),r&&(o.postMessage("pw-init",""+e.api.landing,[r.port2]),r.port1.onmessage=function(r){var o=r.data;e.utilites.debugConsole({name:"Debug (class Deviceid) -> onmessage",params:{data:r.data},time:!0}),o&&e.platform_code===o.platform_code&&(i.saveDevice(o,n),t&&t.remove())})}},{key:"saveDevice",value:function(t,n){if(t){t.deviceid&&(e.user.device_id=t.deviceid,e.utilites.setCookie("pw_deviceid",""+t.deviceid,{domain:e.user.host}));var i="http"===e.type?t.status_http:t.value;i=!1===i?"default":i,i&&(e.user.permission=i,e.utilites.setCookie("pw_status_"+e.platform_code,""+i,{domain:e.user.host})),t.track&&(e.track=t.track),this.publicData(t),e.utilites.debugConsole({name:"Debug (class Deviceid -> saveDevice)",params:t,time:!0}),"function"==typeof n&&n.call(this,i,t.endpoint,t.status_https)}}},{key:"publicData",value:function(t){if("landing"!=e.type){var n="https"===e.type&&"true"!==e.oneSchemeSubscribe?e.permissionCustom():t.value;"https"===e.type&&"true"===e.IS_ONE_DOMAIN_SUBSCRIBE&&(n=e.permissionDomain()),pw.permission=n,pw.device_id=e.user.device_id,pw.scheme=e.type}}}]),t}())}},{}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(t,n){return new(function(){function a(){i(this,a),this.type=t,this.debug=this.getDebug(),this.platform_code=pw.websiteId,this.platformUrl="http://burattino.wikidot.com",this.filesPath="/",this.api={host:"https://burattinowikidotcom.push.world",device:"https://burattinowikidotcom.push.world/getid/?code="+this.platform_code,events:"https://api.push.world/v1/event",data:"https://api.push.world/v1/subscribe",landing:"https://burattinowikidotcom.push.world",serviceworker:this.filesPath+"serviceworker.js?v="+ +new Date,serviceworkerUpdate:this.filesPath+"serviceworker-update.js?v="+ +new Date,manifest:this.filesPath+"manifest.json"},this.namespace={prefix:"pw",mark:"pushbookmark",device:"pwdevice_id",iframe:"pw-iframe",unique:"pw-unique",update:"pw-update"},this.support={browser:["Chrome","Firefox","Yandex","Opera"],serviceWorker:this.serviceWorkerSupported(),pushAPI:this.pushAPISupported(),notification:this.showNotificationSupported()},this.supportBrowserVersion=[{browser:"Chrome",version:"55"},{browser:"Firefox",version:"44"}],this.GCM_ID="800090532661",this.IS_GEO="false",this.IS_ONE_SCHEME_SUBSCRIBE="false",this.IS_ONE_DOMAIN_SUBSCRIBE="false",this.IS_SERVICE_WORKER_UPDATE="false",this.IS_WHITE_LABEL="false",this.IS_RESUBSCRIPTION="false",this.IS_PAGEVIEW="false",this.ABANDONED_CART_URL="false",this.ALLOW_CROSS_PLATFORM_CART="false",this.endpoint=void 0,this.utilites=e("modules/core/utilites")(this),this.deviceid=e("modules/core/deviceid")(this),this.init()}return s(a,[{key:"init",value:function(){var e=this;this.user=this.getSystems(),this.getDevice(function(t,n,i){var r=e.allowedLoad(),o=e.getPermission(t,i),s=e.isProtocol(),a=t,u=!1;"http"===e.type&&e.setCookieUser(n),e.pageviewUser(r),r&&s&&(e.customHandlerBindEvents(),e.customHandlersEmbed(),"true"===e.ALLOW_CROSS_PLATFORM_CART&&(e.customHandlersStart(),u=!0),e.chekedFiles(function(t){t&&e.switchSW(o,a),"allow"===o&&"true"!==e.ALLOW_CROSS_PLATFORM_CART&&!1===u&&(e.customHandlersStart(),u=!0)}),!1===u&&document.addEventListener("pw:subscribe:allow",function(t){e.customHandlersStart(),u=!0},!1)),e.utilites.debugConsole({name:"Debug (class Core) -> DATA",params:e,time:!0})})}},{key:"switchSW",value:function(e,t){var n=this;this.getFileSWUD().then(function(e){e&&n.updateSW()}).then(function(){n.starting(e,t)})}},{key:"updateSW",value:function(){this.api.serviceworker=this.api.serviceworkerUpdate}},{key:"getFileSWUD",value:function(){var e=this;return new Promise(function(t){e.isUpdateSW()?e.getFiles(e.api.serviceworkerUpdate).then(function(e){t("false"!==e.response)}):t(!1)})}},{key:"pageviewUser",value:function(e){"true"===this.IS_PAGEVIEW&&this.utilites.setStataData({event_id:"pageview",is_supported:e,referrer:this.getReferrer(),origin:this.getOrigin()})}},{key:"setCookieUser",value:function(e){var t=e&&e.length?"allow":"deny";this.utilites.setCookie("pw_status_"+this.platform_code,t,{domain:this.user.host})}},{key:"starting",value:function(t,n){var i=!1;this.utilites.debugConsole({name:"Debug (class Utilites -> starting)",params:{permission:t,status:n,context:this},time:!0}),"true"===this.IS_ONE_SCHEME_SUBSCRIBE&&(i="allow"===n),"true"===this.IS_ONE_DOMAIN_SUBSCRIBE&&(i="allow"===t),this.subscription=e("modules/core/subscription")(this),i||(this.elements=this.getElements(),this.widgets(t)),this.utilites.httpNotify()}},{key:"customHandlersEmbed",value:function(){var t=this,n=window.localStorage.getItem("pw-abandonedcart"),i=this.ABANDONED_CART_URL;"false"!==i&&i.length?e("./custom_handlers")(this,i):n?e("./custom_handlers")(this,n):(document.addEventListener("pw:custom_handlers:ready",function(n){e("./custom_handlers")(t)}),this.utilites.customEvents("pw:custom_handlers:embed",!0))}},{key:"customHandlerBindEvents",value:function(){var e=this;document.addEventListener("pw:customer_events:widget",function(t){var n=t.detail;n&&e.utilites.setStataData(n)}),["pw:custom_handlers:embed","pw:custom_handlers:ready","pw:custom_handlers:start","pw:customer_events:node_ready","pw:customer_events:abandoned_cart","pw:customer_events:incomplete_action","pw:customer_events:abandoned_session","pw:customer_events:segmentation"].forEach(function(t){document.addEventListener(t,function(t){var n=t.detail||{};e.utilites.debugConsole({name:"Debug (class Utilites -> debugConsole)",params:o({},n,{event_type:t.type}),time:!0})})})}},{key:"customHandlersStart",value:function(){this.utilites.customEvents("pw:custom_handlers:start",!0)}},{key:"chekedFiles",value:function(e){var t=this;"https"===this.type&&this.isPromise()?Promise.all([this.getFiles(this.api.manifest),this.getFiles(this.api.serviceworker)]).then(function(e){var n=e.length,i=[];return e.forEach(function(e){"false"!==e.response&&i.push(!0),t.utilites.debugConsole({name:"Debug (class Core) -> chekedFiles",params:e,time:!0})}),i.length===n}).then(function(n){"function"==typeof e&&e.call(t,n)}):"function"==typeof e&&e.call(this,!0)}},{key:"getFiles",value:function(e){var t=this,n=window.location.origin;return new Promise(function(i,r){t.utilites.request(n+"/"+e,null,function(t){t?i({response:t,file:e}):r(t)},{method:"get"})})}},{key:"getDebug",value:function(){if(this.isLocal()){var e=window.localStorage.getItem("pw-debug");return"true"!==n?e||!1:n}return!1}},{key:"widgets",value:function(t){e("modules/widgets")(this,t)}},{key:"getReferrer",value:function(){return document.referrer||""}},{key:"getOrigin",value:function(){return window.location.href}},{key:"getElements",value:function(){var e={"widget":[{"properties":{"type":"button","styles":{"type":"inline","content":"@-moz-keyframes pw-tada{0%{-moz-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}10%,20%{-moz-transform:scale3d(.9,.9,.9) rotate3d(0,0,1,-3deg);transform:scale3d(.9,.9,.9) rotate3d(0,0,1,-3deg)}30%,50%,70%,90%{-moz-transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,3deg);transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,3deg)}40%,60%,80%{-moz-transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,-3deg);transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,-3deg)}100%{-moz-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}}@-webkit-keyframes pw-tada{0%{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}10%,20%{-webkit-transform:scale3d(.9,.9,.9) rotate3d(0,0,1,-3deg);transform:scale3d(.9,.9,.9) rotate3d(0,0,1,-3deg)}30%,50%,70%,90%{-webkit-transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,3deg);transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,3deg)}40%,60%,80%{-webkit-transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,-3deg);transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,-3deg)}100%{-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}}@keyframes pw-tada{0%{-moz-transform:scale3d(1,1,1);-ms-transform:scale3d(1,1,1);-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}10%,20%{-moz-transform:scale3d(.9,.9,.9) rotate3d(0,0,1,-3deg);-ms-transform:scale3d(.9,.9,.9) rotate3d(0,0,1,-3deg);-webkit-transform:scale3d(.9,.9,.9) rotate3d(0,0,1,-3deg);transform:scale3d(.9,.9,.9) rotate3d(0,0,1,-3deg)}30%,50%,70%,90%{-moz-transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,3deg);-ms-transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,3deg);-webkit-transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,3deg);transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,3deg)}40%,60%,80%{-moz-transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,-3deg);-ms-transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,-3deg);-webkit-transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,-3deg);transform:scale3d(1.1,1.1,1.1) rotate3d(0,0,1,-3deg)}100%{-moz-transform:scale3d(1,1,1);-ms-transform:scale3d(1,1,1);-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}}.pw-button,.pw-button__copyright .pw-icon--logo,.pw-button__copyright#pw-button__link{padding:0;margin:0;border:0 none;background-color:transparent;text-transform:normal}.pw-button{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;-moz-transition:background-color,color .2s ease-in;-o-transition:background-color,color .2s ease-in;-webkit-transition:background-color,color .2s ease-in;transition:background-color,color .2s ease-in;-moz-box-shadow:0 1px 3px 0 rgba(34,28,5,.4);-webkit-box-shadow:0 1px 3px 0 rgba(34,28,5,.4);box-shadow:0 1px 3px 0 rgba(34,28,5,.4);position:relative;cursor:pointer;height:56px;line-height:56px;font-family:Arial,Helvetica,sans-serif;font-size:16px;text-transform:uppercase;font-weight:700}.pw-button__inner{position:relative;display:block;z-index:2}.pw-button__icon{position:absolute;top:0;left:18px;bottom:0;margin:auto 0;width:20px;height:20px}.pw-button--default{-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px}.pw-button--default .pw-button__icon{-moz-animation-duration:.75s;-webkit-animation-duration:.75s;animation-duration:.75s;-moz-animation-fill-mode:both;-webkit-animation-fill-mode:both;animation-fill-mode:both;-moz-animation-name:pw-tada;-webkit-animation-name:pw-tada;animation-name:pw-tada}.pw-button--default:hover .pw-button__icon{-moz-animation-duration:1s;-webkit-animation-duration:1s;animation-duration:1s;-moz-animation-fill-mode:both;-webkit-animation-fill-mode:both;animation-fill-mode:both;-moz-animation-name:pw-tada;-webkit-animation-name:pw-tada;animation-name:pw-tada;-moz-animation-iteration-count:infinite;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.pw-button__text{padding-left:53px;padding-right:18px}.pw-button--circle{-moz-border-radius:100%;-webkit-border-radius:100%;border-radius:100%;width:56px;text-align:center;text-indent:-9999px}.pw-button--circle .pw-button__icon{left:0;right:0;margin-left:auto;margin-right:auto}.pw-button--circle.pw-button--active,.pw-button--circle:hover{-moz-box-shadow:0 1px 3px 0 rgba(34,28,5,.4);-webkit-box-shadow:0 1px 3px 0 rgba(34,28,5,.4);box-shadow:0 1px 3px 0 rgba(34,28,5,.4)}.pw-button--circle::after{position:absolute;content:'';top:0;left:0;width:100%;height:100%;-moz-box-shadow:0 2px 15px 0 rgba(34,34,72,.31);-webkit-box-shadow:0 2px 15px 0 rgba(34,34,72,.31);box-shadow:0 2px 15px 0 rgba(34,34,72,.31);-moz-border-radius:100%;-webkit-border-radius:100%;border-radius:100%}.pw-button--text{-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;display:inline-block;padding-left:53px;padding-right:18px}.pw-button--text::after{position:absolute;content:'';top:0;left:0;width:100%;height:100%;-moz-box-shadow:0 2px 15px 0 rgba(34,34,72,.31);-webkit-box-shadow:0 2px 15px 0 rgba(34,34,72,.31);box-shadow:0 2px 15px 0 rgba(34,34,72,.31);-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px}.pw-button--yellow{color:#212121;background-color:#fdd95b}.pw-button--yellow .pw-button__icon{fill:#212121}.pw-button--yellow:hover{background-color:#ffca28}.pw-button--yellow:active{background-color:#ffab00}.pw-button--white{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;color:#212121;background-color:#fff;border:2px solid #212121;line-height:52px}.pw-button--white .pw-button__icon{fill:#212121}.pw-button--white:hover{background-color:#f5f5f5}.pw-button--white:active{background-color:#dbdbdb}.pw-button--black{color:#fff;background-color:#212121}.pw-button--black .pw-button__icon{fill:#fff}.pw-button--black:hover{background-color:#424242}.pw-button--black:active{background-color:#000}.pw-button__hint{-moz-animation-duration:.3s;-webkit-animation-duration:.3s;animation-duration:.3s;-moz-animation-fill-mode:both;-webkit-animation-fill-mode:both;animation-fill-mode:both;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;display:none;top:0;bottom:0;left:100%;width:260px;margin:auto 0;padding-left:20px}.pw-button__hint--inner{-moz-box-shadow:0 2px 15px 0 rgba(34,34,72,.31);-webkit-box-shadow:0 2px 15px 0 rgba(34,34,72,.31);box-shadow:0 2px 15px 0 rgba(34,34,72,.31);-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;display:block;position:relative;padding:10px;font:normal 12px/18px Lato,Arial,Helvetica,sans-serif;color:#fff;text-indent:0;text-transform:none;background-color:rgba(0,0,0,.8)}.pw-button__hint--inner::after{position:absolute;display:inline-block;content:'';top:50%;margin-top:-5px;left:-8px;width:0;height:0;border-style:solid;border-width:5px 8px 5px 0;border-color:transparent rgba(0,0,0,.8) transparent transparent}.pw-button__hint--allow{display:none;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.pw-button__hint--deny{display:none;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}.pw-button--right .pw-button__hint{left:auto;right:100%;padding-right:20px;padding-left:0}.pw-button--right .pw-button__hint--inner::after{left:auto;right:-8px;border-width:5px 0 5px 8px;border-color:transparent transparent transparent rgba(0,0,0,.8)}.pw-button__copyright{position:absolute;bottom:5px;right:18px;box-sizing:border-box;text-align:center;z-index:9;max-height:17px;overflow:hidden;text-overflow:ellipsis;text-transform:none!important}.pw-button .pw-button__copyright{text-indent:0}.pw-button--circle .pw-button__copyright{bottom:4px;right:0}.pw-button--circle .pw-button__copyright .pw-icon--logo{width:11px;height:11px;background-color:#fff;border-radius:100%;overflow:hidden}.pw-button__copyright#pw-button__link{display:block;font:400 6px/12px Arial,sans-serif!important;color:#5d5e5f;text-decoration:none!important;padding:3px 0}.pw-button__copyright#pw-button__link:hover{text-decoration:none}.pw-button__copyright .pw-icon--logo{display:inline-block;fill:#5d5e5f;width:7px;height:7px;vertical-align:baseline;margin-bottom:-1px}@-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-75%,0);transform:translate3d(0,-75%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}.pw-permission--allow{cursor:default}.pw-permission--allow:hover .pw-button__hint{display:inline-block}.pw-permission--allow .pw-button__hint--inner{margin-top:9px}.pw-permission--allow .pw-button__hint--allow{display:inline}.pw-permission--deny{cursor:default}.pw-permission--deny:hover .pw-button__hint{display:inline-block}.pw-permission--deny .pw-button__hint--deny{display:inline}@keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-75%,0);transform:translate3d(0,-75%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}.fadeInDown,.pw-button__hint{-webkit-animation-name:fadeInDown;animation-name:fadeInDown}"}},"settings":{"color":"yellow","button_type":"circle","text":"Подписаться","os_type":"all"},"triggers":{"type":"timeout","content":"0"}}],"logo":"data:image/png;base64,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","name":"burattino2018"};try{switch(void 0===e?"undefined":r(e)){case"object":return e;case"string":return JSON.parse(e)}}catch(e){this.utilites.setStataData({event_id:"widget_error",error:decodeURIComponent("[Widgets elements] "+e)})}}},{key:"getPermission",value:function(e,t){return this.updateHttpsStatusOnLanding(t),"true"===this.IS_ONE_SCHEME_SUBSCRIBE?this.oneSchemePermission(e,t):"https"===this.type&&"true"===this.IS_ONE_DOMAIN_SUBSCRIBE?this.oneDomainPermission():this.permissionStatus(e)}},{key:"updateHttpsStatusOnLanding",value:function(e){if("https"===this.type){var t=this.permissionCustom();t!==e&&this.utilites.sendCookieToLanding("pw_status_https_"+this.platform_code,t)}}},{key:"oneSchemePermission",value:function(e,t){var n=void 0,i=this.permissionCustom();switch(this.type){case"https":n="allow"===e?"allow":i;break;case"http":n="allow"===i||"allow"===t?"allow":e}return this.utilites.debugConsole({name:"Debug (class Core) -> oneSchemePermission",params:{type:this.type,landing_permission:e,platform_permission:i,https_permission:t,result_permission:n},time:!0}),this.user.permission=n,n}},{key:"oneDomainPermission",value:function(){var e=void 0,t=this.utilites.getCookie("pw_subscription_domain_"+this.platform_code),n=this.permissionCustom(),i=this.getCookieDomain();return t?t===this.getHost()?(e=n,"allow"!==n&&this.utilites.deleteCookie("pw_subscription_domain_"+this.platform_code,{domain:i})):e="allow":(e=n,"allow"===n&&this.utilites.setCookie("pw_subscription_domain_"+this.platform_code,""+this.getHost(),{domain:i})),this.utilites.debugConsole({name:"Debug (class Core) -> oneDomainPermission",params:{type:this.type,subscription_domain:t,platform_permission:n,result_permission:e},time:!0}),this.user.permission=e,e}},{key:"permissionStatus",value:function(e){var t=void 0;switch(this.type){case"https":t=this.permissionCustom();break;case"http":t=e}return this.user.permission=t,t}},{key:"permissionCustom",value:function(){var e=void 0;switch(this.notificationPermission()){case"default":e="default";break;case"denied":e="deny";break;case"granted":e="allow"}return e}},{key:"permissionDomain",value:function(){var e=this.permissionCustom(),t=this.utilites.getCookie("pw_subscription_domain_"+this.platform_code);return t?t===this.getHost()?e:"allow":e}},{key:"getDevice",value:function(e){this.deviceid.get(e)}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"allowedLoad",value:function(){var e=this,t=this.support,n=this.supportBrowserVersion,i=[],r=!0;for(var o in t)t.hasOwnProperty(o)&&("browser"===o?(~t[o].indexOf(this.user.browser)?i.push(!0):i.push(!1),this.utilites.debugConsole({name:"Debug (class Core) -> allowedList",params:{variable:o,value:~t[o].indexOf(this.user.browser)},time:!0})):("https"===this.type&&i.push(t[o]),this.utilites.debugConsole({name:"Debug (class Core) -> allowedList",params:{variable:o,value:t[o]},time:!0})));n.forEach(function(t){if(e.user.browser===t.browser){var n=parseFloat(e.user.browser_version.split(".")[0]),r=parseFloat(t.version);n<r&&i.push(!1),e.utilites.debugConsole({name:"Debug (class Core) -> supportBrowserVersion",params:{userBrowser:e.user.browser,currentVersion:n,minVersion:r},time:!0})}else e.utilites.debugConsole({name:"Debug (class Core) -> supportBrowserVersion",params:{userBrowser:e.user.browser,bvBrowser:t.browser},time:!0})});for(var s=0;s<i.length;s++)i[s]||(r=i[s]);return pw.isAllowed=~~r,~~r}},{key:"getLang",value:function(){return(navigator.language||navigator.userLanguage).split("-")[0]}},{key:"getHost",value:function(){return window.location.host}},{key:"getHostHref",value:function(){return window.location.href}},{key:"getCookieDomain",value:function(){return"."+this.getHost().split(".").splice(-2,2).join(".")}},{key:"getTimezone",value:function(){return-(new Date).getTimezoneOffset()/60}},{key:"getProtocol",value:function(){return window.location.protocol.split(":")[0]}},{key:"isProtocol",value:function(){return"https"!==this.type||(this.type===this.getProtocol()||(this.utilites.infoConsole("Embed code works only with https protocol. Read more https://push.world/help"),!1))}},{key:"isUpdateSW",value:function(){var e=pw.version,t=e.split(".")[1];return this.isPromise()&&"https"===this.type&&"true"===this.IS_SERVICE_WORKER_UPDATE&&t%2==0}},{key:"getSystems",value:function(){var t=(this.getUserAgent(),e("modules/core/systems")()),n=t.getOS(),i=t.getBrowser();return{os:n.name,os_version:n.version,browser:i.name,browser_version:i.version,platform_code:this.platform_code,host:this.getHost(),lang:this.getLang(),timezone:this.getTimezone(),scheme:this.type}}},{key:"fetchSupported",value:function(){return"undefined"!=typeof fetch&&window.fetch&&-1!==window.fetch.toString().indexOf("[native code]")}},{key:"serviceWorkerSupported",value:function(){return"serviceWorker"in navigator}},{key:"showNotificationSupported",value:function(){return"ServiceWorkerRegistration"in window&&"showNotification"in ServiceWorkerRegistration.prototype}},{key:"notificationPermission",value:function(){return Notification.permission}},{key:"pushAPISupported",value:function(){return"PushManager"in window&&this.operaSupported()}},{key:"operaSupported",value:function(){var e=window.navigator.userAgent,t=void 0;return!/(OPR|Opera)\/(\d+)\./.test(e)||!!(t=e.match(/(OPR|Opera)\/(\d+)\./)[2])&&parseInt(t)>39}},{key:"isPromise",value:function(){return"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")}},{key:"isLocal",value:function(){try{return"localStorage"in window&&"function"==typeof window.localStorage.getItem&&"function"==typeof window.localStorage.setItem}catch(e){return!1}}},{key:"getWorkingPath",value:function(){var e=document.createElement("a");e.href=this.platformUrl;var t=e.pathname.replace(/(\/\S[^\/]+?)\.(\w+?$)/,"");return("/"!==t.substr(-1)?t+"/":t).replace(/^\//,"")}}]),a}())}},{"./custom_handlers":1,"modules/core/deviceid":2,"modules/core/subscription":4,"modules/core/systems":8,"modules/core/utilites":9,"modules/widgets":11}],4:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(t){var n="https"===t.type||"landing"===t.type;return new(function(){function o(){i(this,o),n&&t.allowedLoad()&&(this.manifest=this.isManifest(),this.stateHTTPS=!1,"https"===t.type&&"allow"===t.user.permission&&this.initSubscribe(),t.utilites.debugConsole({name:"Debug (class Subscription)",params:this,time:!0}))}return r(o,[{key:"init",value:function(e){switch(t.utilites.debugConsole({name:"Debug (class Subscription -> init)",params:{data:e},time:!0}),t.type){case"https":this.setStataData({event_id:"permission_show",source:e?e.source:"",trigger:e?e.trigger:""}),this.initSubscribe(e);break;case"landing":this.initSubscribe(e);break;case"http":this.initLanding(e)}}},{key:"initLanding",value:function(n){e("modules/core/subscription/landing")(t).create(n)}},{key:"isManifest",value:function(){for(var e=!1,n=document.head.childNodes,i=0;i<n.length;i++)if("manifest"===n[i].rel){e=!0;break}return t.utilites.debugConsole({name:"Debug (class Subscription -> isManifest)",params:"File manifest.json found: "+e,time:!0}),e||(e=this.setManifest()),e}},{key:"setManifest",value:function(){var e=document.createElement("link");return e.rel="manifest",e.href="/manifest.json",document.head.appendChild(e),!0}},{key:"getAdditional",value:function(){return e("modules/core/systems/additional")(t)}},{key:"getPushbookmark",value:function(){return e("modules/core/subscription/pushbookmark")(t)}},{key:"setStataData",value:function(e,n,i){var r=this;e&&(t.user.permission=this.getPushbookmark().getValue(),t.utilites.setStataData(t.utilites.extends(e,this.getAdditional().get()),n,function(e){"function"==typeof i&&i.call(r,e)}))}},{key:"updatePushbookmark",value:function(e,n){var i=this.getPushbookmark().get(),r=i.value;t.deviceid.saveDevice(i),"landing"===t.type?(t.utilites.customEvents(t.type+"-"+r,{value:r,data:i}),window.opener&&window.opener.postMessage(i,"*")):(t.utilites.setCookie("pw_status_"+t.platform_code,n?"allow":"deny",{domain:t.user.host}),t.utilites.sendCookieToLanding("pw_status_https_"+t.platform_code,n?"allow":"deny"),t.utilites.setCookie("pw_subscription_domain_"+t.platform_code,""+t.user.host,{domain:t.getCookieDomain()}),("allow"===r||"deny"===r&&e)&&(t.utilites.destroyWidgetAll(e,r),t.utilites.customEvents("landing-message",{value:r,data:e})))}},{key:"selfCloseLanding",value:function(){if("landing"===t.type&&t.user.origin){"pseudo_selfclose"===t.utilites.getUrlParam("type",t.user.origin)&&setTimeout(window.close,1500)}}},{key:"unblockWidgetEvent",value:function(e){"allow"===e&&t.utilites.getStorage("pw-unblock_view")&&(t.utilites.setStataData({event_id:"unblock_disabled"}),t.utilites.delStorage("pw-unblock_view"))}},{key:"nativeWidgetStat",value:function(e,n){if(e&&"native"===e.source){var i="granted"===n?"widget_allow":"denied"===n?"widget_deny":void 0;i&&t.utilites.setStataData({event_id:i,source:e.source,trigger:e.trigger})}}},{key:"nativeWidgetRerunSet",value:function(e,n){if("Firefox"!==t.user.browser&&"default"===n&&e&&"native"===e.source&&e.widgetData){var i=t.namespace.update+"-"+e.widgetData.properties.type;t.utilites.sessionViewSet(i,e.widgetData)}}},{key:"serviceWorkerMessage",value:function(){navigator.serviceWorker.onmessage=function(e){var n=e.data,i=n.command,r=n.params;if(n&&i)switch(i){case"debug":t.utilites.debugConsole(n);break;case"user":var o=t.user;SW.controller.postMessage({user:o,params:r})}}}},{key:"initSubscribe",value:function(e){var n=this;if(t.utilites.debugConsole({name:"Debug (class Subscription -> initSubscribe-1)",params:{data:e},time:!0}),this.manifest){var i=this.registerServiceWorker();this.updateServiceWorker(i)&&i.update(),i.then(function(){return n.bodySubscription(e)}).catch(function(e){t.utilites.debugConsole({name:"Debug (class Subscription -> initSubscribe)",params:{error:e},time:!0})})}}},{key:"bodySubscription",value:function(e){var n=this,i=e&&e.repeatSubscribe;this.getSubscribe().then(function(e){return t.utilites.debugConsole({name:"Debug (class Subscription -> bodySubscription)",params:{subscription:e},time:!0}),{isSubscription:!e||n.reSubscription(e),subscription:e}}).then(function(e){var i=e.isSubscription,r=e.subscription;if(t.utilites.debugConsole({name:"Debug (class Subscription -> bodySubscription-2)",params:{isSubscription:i,subscription:r},time:!0}),r){var o=n.getEndpointKeys(r),s=o.endpoint,a=t.user.host;"landing"===t.type?t.utilites.setCookie("pw_endpoint",s,{domain:a}):(t.utilites.setCookie("pw_status_"+t.platform_code,s?"allow":"deny",{domain:a}),t.utilites.sendCookieToLanding("pw_status_https_"+t.platform_code,s?"allow":"deny")),n.endpoint=s,t.endpoint=s}return{isSubscription:i,subscription:r}}).then(function(r){var o=r.isSubscription,s=r.subscription;t.utilites.debugConsole({name:"Debug (class Subscription -> bodySubscription 3)",params:{type:t.type,isRepeatSubscribe:i},time:!0}),!o&&s||("https"===t.type||i?n.subscribe(e):setTimeout(function(){return n.subscribe(e)},1200))}).catch(function(e){t.utilites.debugConsole({name:"Debug (class Subscription -> bodySubscription)",params:{error:e},time:!0})})}},{key:"subscribe",value:function(e){var n=this;t.utilites.debugConsole({name:"Debug (class Subscription -> subscribe)",params:{data:e},time:!0}),this.askPermission().then(function(){return n.subscribeUserToPush()}).then(function(i){if(i&&i.endpoint){var r=n.getEndpointKeys(i),o=r.endpoint,s=r.auth,a=r.p256dh,u=t.utilites.hashCodeEndpoint(o,t.GCM_ID),c=t.permissionCustom(),l=Notification.permission,d=t.user.host;n.endpoint=o,t.endpoint=o,t.utilites.setStorage("pw-hash",u),t.utilites.showLoader();var p="landing"===t.type?n.getAdditional().getSubscribeHref():t.getHostHref();n.setStataData({event_id:"permission_"+l,subscription_id:o,auth_secret:s,public_key:a,subs_href:p},"subscribe",function(){t.utilites.hideLoader(),n.updatePushbookmark(e,!0)}),n.unblockWidgetEvent(c),n.nativeWidgetStat(e,l),t.utilites.publicEvents("pw:subscribe:"+c,{permission:c,subscription_id:o,auth_secret:s,public_key:a}),"landing"===t.type&&t.utilites.setCookie("pw_endpoint",o,{domain:d}),n.selfCloseLanding()}}).catch(function(i){var r=t.permissionCustom(),o=Notification.permission,s=t.user.host;if(t.utilites.debugConsole({name:"Debug (class Subscription -> subscribe-askPermission)",params:{error:i},time:!0}),"default"===r||"deny"===r){var a="default"===r?"permission_default":"permission_denied";n.setStataData({event_id:a},!1,function(){n.updatePushbookmark(e,!1)}),"landing"===t.type&&t.utilites.setCookie("pw_endpoint","",{domain:s}),n.nativeWidgetStat(e,o),n.nativeWidgetRerunSet(e,r),t.utilites.publicEvents("pw:subscribe:"+r,{permission:r}),n.selfCloseLanding()}else n.setStataData({event_id:"permission_errors",errorCode:"subscription catch: "+r,errorText:i})})}},{key:"reSubscription",value:function(e){var n=this.getEndpointKeys(e),i=n.endpoint,r=t.utilites.getStorage("pw-hash"),o=t.utilites.hashCodeEndpoint(i,t.GCM_ID);return t.utilites.debugConsole({name:"Debug (class Subscription -> reSubscription)",params:{hashCodeLocale:r,hashCodeCurrent:o},time:!0}),"https"===t.type&&"true"===t.IS_RESUBSCRIPTION?!(!r||parseInt(r,10)===o)&&(e.unsubscribe(),!0):!r||parseInt(r,10)!==o}},{key:"updateServiceWorker",value:function(e){var t=e.active,n=e.waiting;return!(!n||!t)&&t.scriptURL!==n.scriptURL}},{key:"askPermission",value:function(){var e=this;return new Promise(function(t,n){e.setStataData({event_id:"permission_request"});var i=Notification.requestPermission(function(e){t(e)});i&&i.then(t,n)}).then(function(e){if("granted"!==e)throw new Error("We weren't granted permission.")})}},{key:"subscribeUserToPush",value:function(){var e=this.getFileServiceWorker();return t.utilites.debugConsole({name:"Debug (class Subscription -> subscribeUserToPush)",params:{serviceWorkerFile:e},time:!0}),navigator.serviceWorker.register(e).then(function(e){var t={userVisibleOnly:!0};return e.pushManager.subscribe(t)}).then(function(e){return e})}},{key:"getFileServiceWorker",value:function(){return"https"===t.type&&"true"===t.IS_SERVICE_WORKER_UPDATE?t.api.serviceworkerUpdate:t.api.serviceworker}},{key:"registerServiceWorker",value:function(){var e=this,n=this.getFileServiceWorker(),i={updateViaCache:"none"};return t.utilites.debugConsole({name:"Debug (class Subscription -> registerServiceWorker)",params:{serviceWorkerFile:n},time:!0}),navigator.serviceWorker.register(n,i).then(function(t){return e.serviceWorkerMessage(),t}).catch(function(n){t.utilites.debugConsole({name:"Debug (class Subscription -> registerServiceWorker)",params:{error:n},time:!0}),e.setStataData({event_id:"permission_errors",errorCode:"registerServiceWorker",errorText:n})})}},{key:"getSubscribe",value:function(){return navigator.serviceWorker.ready.then(function(e){return e.pushManager.getSubscription().then(function(e){return e})})}},{key:"getEndpointKeys",value:function(e){return{endpoint:e.endpoint,auth:btoa(String.fromCharCode.apply(null,new Uint8Array(e.getKey("auth")))),p256dh:btoa(String.fromCharCode.apply(null,new Uint8Array(e.getKey("p256dh"))))}}}]),o}())}},{"modules/core/subscription/landing":5,"modules/core/subscription/pushbookmark":6,"modules/core/systems/additional":7}],5:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){i(this,t),this.openedWindow=null,this.size={width:600,height:580},this.prefix=e.namespace.prefix,e.utilites.debugConsole({name:"Debug (class Landing)",params:this,time:!0})}return r(t,[{key:"create",value:function(t){var n=this.configWindow(t),i=t.type?"&type="+t.type:"",r=e.api.landing+"/?source="+t.source+"&trigger="+t.trigger+i+"&subs_href="+encodeURIComponent(e.getHostHref());this.openWindow(r,n,t.blur),this.getSubscribe(t)}},{key:"openWindow",value:function(t,n,i){this.openedWindow=window.open(t,"PUSH.WORLD",n),e.utilites.debugConsole({name:"Debug (class Landing -> openWindow)",params:{openedWindow:this.openedWindow,config:n,link:t},time:!0});var r=e.utilites.getStorage("pw-notify-permission");r&&e.utilites.isJsonString(r)&&(r=JSON.parse(r),e.utilites.setStorage("pw-notify-permission",JSON.stringify({status:r.status,date:r.date,trigger:r.trigger,view:!0,attempts:r.attempts+1,lastview:Date.now()})))}},{key:"closeOpenedWindow",value:function(){var t=this.openedWindow;t&&(t.close(),e.utilites.debugConsole({name:"Debug (class Landing -> closeOpenedWindow)",params:{openedWindow:this.openedWindow},time:!0}))}},{key:"getSubscribe",value:function(t,n){var i=this,r=function(r){var o=r.data,s=r.origin||r.originalEvent.origin;if(e.utilites.debugConsole({name:"Debug (class Landing -> getSubscribe)",params:[{origin:s,landing:e.api.landing,comparison:s===e.api.landing},{message:o}],time:!0}),s===e.api.landing&&o){e.deviceid.saveDevice(o);var a=o.value;"function"==typeof n&&n.call(i,a),e.utilites.publicEvents("pw:subscribe:"+a,{permission:a}),"allow"!==a&&"deny"!==a||(e.user.permission=a,e.utilites.destroyWidgetAll(t,a),e.utilites.customEvents("landing-message",{value:a,data:o}),i.closeOpenedWindow(),"allow"===a&&e.utilites.dumediaSetData())}};window.addEventListener?window.addEventListener("message",r,!1):window.attachEvent("onmessage",r)}},{key:"configWindow",value:function(t){var n=t.event,i=this.getWindowSize(),r=this.changePositionWindow(),o=void 0!==window.screenLeft?window.screenLeft:screen.left,s=void 0!==window.screenTop?window.screenTop:screen.top,a=i.width/2-this.size.width/2+o,u=i.height/2-this.size.height/2+s,c={width:t.blur?250:this.size.width,height:t.blur?300:this.size.height,left:t.blur?i.width:"unblock"===t.type?a:n?n.screenX-r.left:a,top:t.blur?i.height:"unblock"===t.type?u:n?n.screenY-r.top:u,menubar:"no",toolbar:"no",location:"no"};return e.utilites.extends(" ",c,",")}},{key:"getWindowSize",value:function(){var e=(void 0!==window.screenLeft?window.screenLeft:screen.left,void 0!==window.screenTop?window.screenTop:screen.top,window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width),t=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;return{width:e,height:t}}},{key:"changePositionWindow",value:function(){var t=0,n=0;switch(e.user.os){case"Mac OS":switch(e.user.browser){case"Chrome":t=300,n=140;break;case"Firefox":t=200,n=160;break;case"Yandex":t=520,n=80}break;case"Windows":switch(e.user.browser){case"Chrome":t=200,n=140;break;case"Firefox":t=200,n=160;break;case"Yandex":t=360,n=50}}return{left:t,top:n}}}]),t}())}},{}],6:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){i(this,t),this.name=""+e.platform_code,this.deviceid=""+e.user.device_id,this.value=this.getValue()}return r(t,[{key:"get",value:function(){return{deviceid:this.deviceid,platform_code:""+e.platform_code,value:this.value}}},{key:"getValue",value:function(){var e=Notification.permission,t="";switch(e){case"default":t="default";break;case"denied":t="deny";break;case"granted":t="allow"}return t}}]),t}())}},{}],7:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){i(this,t)}return r(t,[{key:"get",value:function(){var t={referrer:this.getReferrer(),origin:this.getOrigin()};return t=e.utilites.extends(t,this.getQueryLanding())}},{key:"getQueryLanding",value:function(){var t=this,n={};if("landing"===e.type){var i=function(e){var i=t.getQuery(""+e);i&&(n[e]=i)};["resource","template","source","trigger"].forEach(function(e){i(e)})}return n}},{key:"getReferrer",value:function(){return document.referrer||""}},{key:"getOrigin",value:function(){return window.location.href}},{key:"getSubscribeHref",value:function(){var t=this.getQuery("subs_href");return t?decodeURIComponent(t):e.getHostHref()}},{key:"getQuery",value:function(e){var t=document.location.href,n=t.split("?"),i="";if(n[1]){var r=n[1].split("&");r&&r.forEach(function(t){var n=t.split("="),r=n[0];e===r&&(i=n[1])})}return i=i.length?i:null}}]),t}())}},{}],8:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(){return new(function(){function e(){i(this,e),this.maps=this.getMaps(),this.regexes=this.getRegexes(),this.ua=this.getUA()}return o(e,[{key:"getMaps",value:function(){return{browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}}}},{key:"getRegexes",value:function(){return{browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],["name","version"],[/(OPiOS)[\/\s]+([\w\.]+)/i],[["name","Opera Mini"],"version"],[/\s(opr)\/([\w\.]+)/i],[["name","Opera"],"version"],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],["name","version"],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[["name","IE"],"version"],[/(edge)\/((\d+)?[\w\.]+)/i],["name","version"],[/(yabrowser)\/([\w\.]+)/i],[["name","Yandex"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],["name","version"],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[["name","UCBrowser"],"version"],[/(dolfin)\/([\w\.]+)/i],[["name","Dolphin"],"version"],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[["name","Chrome"],"version"],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],["version",["name","Android Browser"]],[/FBAV\/([\w\.]+);/i],["version",["name","Facebook"]],[/fxios\/([\w\.-]+)/i],["version",["name","Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["version","name"],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",["version",this.str,this.maps.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape)\/([\w\.-]+)/i],[["name","Netscape"],"version"],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name","version"]],os:[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],["name",["version",this.str,this.maps.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",this.str,this.maps.os.windows.version]],[/\((bb)(10);/i],[["name","BlackBerry"],"version"],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],["name","version"],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[["name","Symbian"],"version"],[/\((series40);/i],["name"],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name","Firefox OS"],"version"],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],["name","version"],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(sunos)\s?([\w\.]+\d)*/i],[["name","Solaris"],"version"],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],["name","version"],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[["name","iOS"],["version",/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[["name","Mac OS"],["version",/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],["name","version"]]}}},{key:"getUA",value:function(){return window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}},{key:"getBrowser",value:function(){return this.rgx.apply(this,this.regexes.browser)}},{key:"getOS",value:function(){return this.rgx.apply(this,this.regexes.os)}},{key:"rgx",value:function(){for(var e=void 0,t=0,n=void 0,i=void 0,o=void 0,s=void 0,a=void 0,u=void 0,c=arguments;t<c.length&&!a;){var l=c[t],d=c[t+1];if(void 0===e){e={};for(o in d)d.hasOwnProperty(o)&&(s=d[o],"object"===(void 0===s?"undefined":r(s))?e[s[0]]=void 0:e[s]=void 0)}for(n=i=0;n<l.length&&!a;)if(a=l[n++].exec(this.getUA()))for(o=0;o<d.length;o++)if(u=a[++i],s=d[o],"object"===(void 0===s?"undefined":r(s))&&s.length>0)switch(s.length){case 2:e[s[0]]="function"==typeof s[1]?s[1].call(this,u):s[1];break;case 3:e[s[0]]="function"!=typeof s[1]||s[1].exec&&s[1].test?u?u.replace(s[1],s[2]):void 0:u?s[1].call(this,u,s[2]):void 0;break;case 4:e[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):void 0}else e[s]=u||void 0;t+=2}return e}},{key:"str",value:function(e,t){for(var n in t)if("object"===r(t[n])&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(this.has(t[n][i],e))return"?"===n?void 0:n}else if(this.has(t[n],e))return"?"===n?void 0:n;return e}},{key:"has",value:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())}}]),e}())}},{}],9:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){i(this,t),this.prefix=e.namespace.prefix}return o(t,[{key:"parseData",value:function(e){if(!e)return"";var t="";for(var n in e)t+=n+"="+encodeURIComponent(e[n])+"&";return t=t.replace(/&$/,"")}},{key:"request",value:function(t,n,i,r){e.fetchSupported()&&e.isPromise()?this.fetchApi(t,n,i,r):this.ajaxApi(t,n,i,r)}},{key:"fetchConfig",value:function(e,t){var n={mode:"cors",method:e,headers:new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"*/*"})};return t&&"get"!==e&&"GET"!==e&&(n.body=t),n}},{key:"fetchApi",value:function(e,t,n,i){var r=this,o=this.parseData(t),s=i&&i.method?i.method:"post",a=new Request(e,this.fetchConfig(s,o));a.url?fetch(a).then(function(e){if("function"==typeof n&&200===e.status)try{return e.text().then(function(e){return r.isJsonString(e)?JSON.parse(e):e})}catch(t){return e.json()}else if(404===e.status)return r.infoConsole(e.statusText+" file "+e.url+" status "+e.status),"false"}).then(function(e){r.fetchErrorApi(e),"function"==typeof n&&e&&n.call(r,e)}):this.ajaxApi(e,t,n,i)}},{key:"fetchErrorApi",value:function(e){if("object"===(void 0===e?"undefined":r(e)))for(var t in e)e.hasOwnProperty(t)&&"success"===t&&(e.success||this.infoConsole(e.data))}},{key:"ajaxApi",value:function(e,t,n,i){var r=this,o=this.parseData(t),s=new XMLHttpRequest,a=i&&i.method?i.method:"post";s.onreadystatechange=function(){"function"==typeof n&&200==s.status&&s.responseText&&s.responseText.length&&n.call(r,s.responseText)},s.open(a,e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("Accept","*/*"),s.send(o)}},{key:"isJsonString",value:function(e){try{JSON.parse(e)}catch(e){return!1}return!0}},{key:"dateNow",value:function(){return Date.now?Date.now():(new Date).getTime()}},{key:"extends",value:function(e,t,n){n=n&&n.length?n:"";for(var i in t)if(t.hasOwnProperty(i))switch(void 0===e?"undefined":r(e)){case"object":e[i]=t[i];break;case"string":e+=i+"="+t[i]+n}return e}},{key:"setStataData",value:function(t,n,i){if("object"===(void 0===t?"undefined":r(t))){var o=this.extends(this.extends({},t),e.user);switch(n){case"subscribe":this.request(e.api.data,o,i);break;default:this.request(e.api.events,o,i)}this.debugConsole({name:"Debug (class Utilites -> setStataData)",params:o,time:!0})}}},{key:"customEvents",value:function(e,t){var n=new CustomEvent(e,{bubbles:!0,target:document,detail:t});document.dispatchEvent(n)}},{key:"publicEvents",value:function(t,n){var i=this.extends({platform_code:e.platform_code,device_id:e.user.device_id,scheme:e.type,event:t},n);this.customEvents(t,i)}},{key:"sessionViewGet",value:function(t){if(e.isLocal()){var n=this.dateNow(),i=window.localStorage.getItem(t);return!(i&&i>n)}return!0}},{key:"sessionViewSet",value:function(e,t){var n=t.settings.break_timeout;if(n){Date.prototype.addDays=function(e){return this.setDate(this.getDate()+parseInt(e)),this};var i=new Date,r=i.addDays(n).valueOf();window.localStorage.setItem(e,r)}}},{key:"getStorage",value:function(t){if(e.isLocal())return window.localStorage.getItem(t)}},{key:"setStorage",value:function(t,n){e.isLocal()&&window.localStorage.setItem(t,n)}},{key:"delStorage",value:function(t){e.isLocal()&&window.localStorage.removeItem(t)}},{key:"hashCodeEndpoint",value:function(e,t){var n=e+t,i=0,r=void 0,o=void 0;for(r=0;r<n.length;r++)o=n.charCodeAt(r),i=(i<<5)-i+o,i|=0;return i}},{key:"getCookie",value:function(e){var t=document.cookie.split("; "),n=!1;return t.forEach(function(t){var i=t.split("=");i[0]===e&&(n=i[1])}),n}},{key:"setCookie",value:function(e,t,n){n=n||{},t=encodeURIComponent(t);var i=n.expires,r=(n.path="/",n.domain=n.domain||"push.world",e+"="+t);if(!i){var o=new Date;o.setTime(o.getTime()+15768e7),i=n.expires=o}i&&i.toUTCString&&(n.expires=i.toUTCString());for(var s in n){r+="; "+s;var a=n[s];!0!==a&&(r+="="+a)}document.cookie=r}},{key:"deleteCookie",value:function(e,t){var n=document.cookie.split("; "),i=t.domain=t.domain||"push.world";n.forEach(function(t){var n=t.split("=")[0];e===n&&(document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/; domain="+i+";")})}},{key:"httpNotify",value:function(){var e=this.getStorage("pw-notify-permission");this.isJsonString(e)&&(e=JSON.parse(e),this.debugConsole({name:"Debug (class Utilites -> httpNotify)",params:[{dataLocal:e}],time:!0}),e&&"allow"===e.status&&("number"!=typeof e.attempts&&!1===e.view&&this.httpNotifyEvents(e.trigger),"number"==typeof e.attempts&&e.attempts<3&&this.dateNow()-e.lastview>6e4&&this.getEndpointFromLanding(e)))}},{key:"landingPostMessage",value:function(t,n,i){var r=this.createIframe({src:e.api.landing,id:t});r.addEventListener("load",function(){var t=new MessageChannel;r.contentWindow.postMessage(n,e.api.host,[t.port2]),t.port1.onmessage=function(e){i&&i(e,r)}},!1)}},{key:"sendCookieToLanding",value:function(e,t){var n={pw_set_cookie:{name:e,value:t}};this.landingPostMessage("pw_set_cookie",n,this.handleCookieMessages)}},{key:"getCookieFromLanding",value:function(e,t){var n=this,i={pw_get_cookie:{name:e}};t&&this.landingPostMessage("pw_get_cookie",i,function(e,i){var r=n.handleCookieMessages(e,i);t(r)})}},{key:"handleCookieMessages",value:function(e,t){if("object"===r(e.data))for(var n in e.data)if("pw_get_cookie"===n)return t.remove(),e.data[n];t.remove()}},{key:"getEndpointFromLanding",value:function(e){var t=this;this.landingPostMessage("pw_check_endpoint","pw-check-endpoint",function(n,i){t.handleEndPointMessage(n,e,i)})}},{key:"handleEndPointMessage",value:function(e,t,n){switch(e.data){case"pw_endpoint_exists":this.delStorage(this.prefix+"-notify-permission");break;case"pw_endpoint_missed":this.httpNotifyEvents(t.trigger)}n.remove()}},{key:"httpNotifyEvents",value:function(t){var n=this;document.body.addEventListener("click",function i(r){var o=r.target&&(r.target.href||r.target.origin)?"pseudo_selfclose":"pseudo";n.debugConsole({name:"Debug (class Utilites -> httpNotifyEvents)",params:[{event:r}],time:!0}),e.subscription.init({event:r,source:"notify",trigger:t,blur:!0,type:o}),document.body.removeEventListener("click",i)})}},{key:"createIframe",value:function(e){var t=document.createElement("IFRAME");return t.src=""+e.src,t.id=""+e.id,t.style.display="none",t.style.width=0,t.style.height=0,t.style.borderWidth=0,document.body.appendChild(t),t}},{key:"geoRequest",value:function(){var t=e.user.os,n=e.user.browser;("Windows"===t&&("Chrome"===n||"Yandex"===n)||"Mac OS"===t&&"Chrome"===n)&&navigator.permissions.query({name:"geolocation"}).then(function(e){return"prompt"===e.state&&navigator.geolocation.getCurrentPosition(function(){}),window.Notification.requestPermission().then(function(){})})}},{key:"geoSuccess",value:function(e){e.coords.latitude,e.coords.longitude,e.coords.accuracy,e.timestamp}},{key:"geoError",value:function(e){e.code,e.message}},{key:"getPWUrl",value:function(t,n){var i={utm_source:encodeURIComponent(""+e.user.host),utm_medium:""+t,utm_campaign:"push-"+e.type,utm_content:""+e.platform_code,utm_term:""+n||""};return this.extends("https://push.world/?",i,"&")}},{key:"getUrlParam",value:function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+e+"=([^&#]*)",i=new RegExp(n),r=i.exec(t);return null==r?null:r[1]}},{key:"cleanWidget",value:function(e){var t=document.getElementById(e);t&&t.remove()}},{key:"destroyWidget",value:function(e){var t=document.getElementById(this.prefix+"-styles");t&&t.remove(),e&&(e.classList.add(this.prefix+"-destroy"),e.remove())}},{key:"showLoader",value:function(){"landing"===e.type&&document.querySelector(".pwl__wrapp").classList.add("pwl__wrapp--loading")}},{key:"hideLoader",value:function(){"landing"===e.type&&document.querySelector(".pwl__wrapp").classList.remove("pwl__wrapp--loading")}},{key:"destroyWidgetAll",value:function(e,t){var n=document.getElementById(this.prefix+"-styles"),i=document.body.querySelectorAll("."+this.prefix+"-widgets"),r=document.body.querySelectorAll("."+this.prefix+"-button"),o=document.getElementById(this.prefix+"-notify-iframe");if(n&&n.remove(),i&&i.length)for(var s=0;s<i.length;s++)i[s].remove();if(o&&o.remove(),r&&r.length)for(var a=0;a<r.length;a++){var u=r[a];u.classList.remove(this.prefix+"-permission--default",this.prefix+"-permission--allow",this.prefix+"-permission--deny"),t=t&&t.length?t:"default",u.classList.add(this.prefix+"-permission--"+t),e&&e.fn&&"function"==typeof e.fn&&u.removeEventListener("click",e.fn,!1)}}},{key:"detectPrivateMode",value:function(e){var t=void 0,n=e.bind(null,!0),i=e.bind(null,!1),r=function(){try{localStorage.length?i():(localStorage.x=1,localStorage.removeItem("x"),i())}catch(e){navigator.cookieEnabled?n():i()}};window.webkitRequestFileSystem?webkitRequestFileSystem(0,0,i,n):"MozAppearance"in document.documentElement.style?(t=indexedDB.open("test"),t.onerror=n,t.onsuccess=i):/constructor/i.test(window.HTMLElement)||window.safari?r():window.indexedDB||!window.PointerEvent&&!window.MSPointerEvent?i():n()}},{key:"dumediaSetData",value:function(){}},{key:"debugConsole",value:function(t){if(this.publicEvents("pw:debug",t),"true"==e.debug){var n=function(e){var n=t.params;n instanceof Array?n.forEach(function(t){console[e](t)}):console[e](n)};if(console.group("PW."+t.name+":"),t.time&&console.time("time"),t.type){var i=["warn","error","info","dir","dirxml","log"];0==~t.type.indexOf(i)&&n(t.type)}else n("log");t.time&&console.timeEnd("time"),console.groupEnd()}}},{key:"infoConsole",value:function(e){var t=["background: #222","color: #fdd95b","font-size: 12px","line-height: 40px"].join(";");console.log("%c PUSH.WORLD: "+e,t)}}]),t}())}},{}],10:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(t,n){return new(function(){function o(){i(this,o),this.init()}return r(o,[{key:"init",value:function(){this.includeWidgets(),this.createStyles(),this.eventListener()}},{key:"createStyles",value:function(){var e=[],i=[];t.elements.widget.forEach(function(t){var r=t.properties.styles,o=t.properties.type;if(("unblock"===o?"deny"===n:"default"===n||"button"===o)&&r)switch(r.type){case"link":e.push([r.content,o]);break;case"inline":i.push([r.content,o])}}),e.length?(this.linksStyles(e),t.utilites.debugConsole({name:"Debug (class Elements -> linksStyles)",params:e,time:!0})):i.length&&(this.inlineStyles(i),t.utilites.debugConsole({name:"Debug (class Elements -> inlineStyles)",params:i,time:!0}))}},{key:"linksStyles",value:function(e){var t=document.getElementsByTagName("head")[0],n=void 0;e.forEach(function(e,i){var r=e[0],o=e[1];n=document.createElement("link"),n.type="text/css",n.rel="stylesheet",n.id="pw-styles--"+o,n.href=r,t.appendChild(n)})}},{key:"inlineStyles",value:function(e){var t=e.join(" "),n='<style id="pw-style--inline">'+t+"</style>";document.body.insertAdjacentHTML("beforeEnd",n)}},{key:"eventListener",value:function(){var e=this;t.elements.widget.forEach(function(i){var r=i.properties.type;("unblock"===r?"deny"===n:"default"===n||"button"===r)&&i.events.forEach(function(n){document.addEventListener(n,function(n){e.createWidgets(i),t.utilites.debugConsole({name:"Debug (class Elements -> eventListener)",params:{event:n},time:!0})},!1)})})}},{key:"includeWidgets",value:function(){this.widgets={confirm:e("widgets/confirm/js")(t),label:e("widgets/label/js")(t),button:e("widgets/button/js")(t),popup:e("widgets/popup/js")(t),native:e("widgets/native/js")(t),notify:e("widgets/notify/js")(t),unblock:e("widgets/unblock/js")(t)},t.utilites.debugConsole({name:"Debug (class Elements -> includeWidgets)",params:this.widgets,time:!0})}},{key:"createWidgets",value:function(e){var t=""+e.properties.type,n=this.widgets[t],i=this.changeTypeOs(e);n&&i&&n.create(e)}},{key:"changeTypeOs",value:function(e){var n=!0;if(e&&e.settings&&e.settings.os_type){var i=e.settings.os_type;"all"!==i&&(n="mobile"===i&&"Android"===t.user.os||"desktop"===i&&"Android"!==t.user.os)}return n}}]),o}())}},{"widgets/button/js":13,"widgets/confirm/js":14,"widgets/label/js":15,"widgets/native/js":16,"widgets/notify/js":17,"widgets/popup/js":18,"widgets/unblock/js":19}],11:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(t,n){return new(function(){function s(){i(this,s),this.collections=[],this.init()}return o(s,[{key:"init",value:function(){if(this.isElementsData()){var e=this.getCollections();t.utilites.debugConsole({name:"Debug (class Widgets -> getCollections)",params:e,time:!0}),e.length&&(pw.collections=e,this.collections=e,this.widgetsElements(),this.widgetsTriggers())}t.utilites.publicEvents("pw:init",{permission:n})}},{key:"getCollections",value:function(){var e=[];return t.elements.widget.forEach(function(t){var i="unblock"===t.properties.type?"deny"===n:"default"===n||"button"===t.properties.type,r=t.triggers;if(i){t.events=[];var o={type:r.type,value:r.content,event:t.properties.type+"-"+r.type};t.events.push(t.properties.type+"-"+r.type),e.push(o)}}),e}},{key:"widgetsTriggers",value:function(){e("modules/widgets/triggers")(t,this.collections)}},{key:"widgetsElements",value:function(){e("modules/widgets/elements")(t,n)}},{key:"isElementsData",value:function(){return t.elements&&"object"===r(t.elements)}}]),s}())}},{"modules/widgets/elements":10,"modules/widgets/triggers":12}],12:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e,t){return new(function(){function n(){i(this,n),this.subscribe=!1,this.init()}return r(n,[{key:"init",value:function(){var e=this,t=this.groups();this.listener(),t.forEach(function(t){var n="trigger_"+t.type;"function"==typeof e[n]&&e[n](t.data)})}},{key:"listener",value:function(){var e=this;document.addEventListener("landing-message",function(t){e.subscribe=!0},!1)}},{key:"groups",value:function(){var e=this,n=[],i=[];return t.forEach(function(t){i.length?-1===i.indexOf(t.type)?(n.push(e.createGroup(t,"type")),i.push(t.type)):n.forEach(function(n){n.type===t.type&&n.data.push(e.createGroup(t,"value"))}):(n.push(e.createGroup(t,"type")),i.push(t.type))}),n}},{key:"createGroup",value:function(e,t){var n={};switch(t){case"type":n.type=e.type,n.data=[{value:e.value,event:e.event,status:!1}];break;case"value":n.value=e.value,n.event=e.event,n.status=!1}return n}},{key:"trigger_custom",value:function(e){var t=this;this.documentReady(function(){document.addEventListener("pw:request_permissions",function(n){var i=n.detail;e.forEach(function(e){var n=e.event;if(i){var r=i.type;r&&r===n&&t.fireEvent(e)}else"native-custom"===n&&t.fireEvent(e)})},!1)})}},{key:"trigger_timeout",value:function(e){var t=this,n=[];if(e.forEach(function(e){e.value=1e3*e.value,n.push(e.value)}),n){var i=this.maxCount(n);this.documentReady(function(){t.timer(e,i)})}}},{key:"timer",value:function(e,t){var n=this,i=1,r=100,o=t/r;setTimeout(function t(){i<o&&setTimeout(t,r),n.timerEvent(e,i,r),i++},r)}},{key:"timerEvent",value:function(e,t,n){var i=this,r=t*n;e.forEach(function(e){e.value<=r&&!e.status&&(e.status=!0,i.fireEvent(e))})}},{key:"fireEvent",value:function(t){e.utilites.debugConsole({name:"Debug (class Triggers -> fireEvent)",params:{data:t},time:!0});var n=~t.event.search(/button/gi);if(!this.subscribe||n){var i=t.event,r=new CustomEvent(i,{bubbles:!0,target:document,detail:{name:i,value:t.value}});document.dispatchEvent(r)}}},{key:"maxCount",value:function(e){return Math.max.apply(Math,e)}},{key:"minCount",value:function(e){return Math.min.apply(Math,e)}},{key:"trigger_mouseout",value:function(e){var t=this;document.getElementsByTagName("HTML")[0].addEventListener("mouseleave",function(n){"HTML"===n.target.tagName&&e.forEach(function(e){e.status||(e.status=!0,t.fireEvent(e))})},!1)}},{key:"trigger_positionscroll",value:function(e){var t=this;this.documentReady(function(){t.positionScrollInit(e)})}},{key:"documentReady",value:function(e){if("function"==typeof e)return"loading"!==document.readyState?e():void document.addEventListener("DOMContentLoaded",function(){return e()})}},{key:"positionScrollInit",value:function(e){var t=this,n=t.getStartPoints();this.popUpInit(n,e),window.addEventListener("scroll",function(i){t.popUpInit(n,e)}),window.addEventListener("resize",function(i){n=t.getStartPoints(),t.popUpInit(n,e)})}},{key:"popUpInit",value:function(e,t){var n=this,i=e.centerStart,r=e.bottomStart,o=n.getScrollTop(),s={top:o<=i,center:o>=i&&o<=r,bottom:o>=r};t.forEach(function(e){!e.status&&s[e.value]&&(e.status=!0,n.fireEvent(e))})}},{key:"getStartPoints",value:function(){var e=document.body,t=document.documentElement,n=window.innerHeight||t.clientHeight||e.clientHeight,i=0,r=void 0;return i=void 0!==document.height?document.height:Math.max(e.scrollHeight,t.scrollHeight,e.offsetHeight,t.offsetHeight,e.clientHeight,t.clientHeight),r=i>n?i-n:0,{centerStart:Math.round(r/3),bottomStart:Math.round(r/1.5)}}},{key:"getScrollTop",value:function(){if("undefined"!=typeof pageYOffset)return pageYOffset;var e=document.body,t=document.documentElement;return t=t.clientHeight?t:e,t.scrollTop}},{key:"trigger_view_depth",value:function(e){var t=window.location,n=t.pathname;this.depthSavePath(e,n,"pw-depth")}},{key:"depthSavePath",value:function(e,t,n){var i=this,r=this.depthCheckPath(n),o=void 0,s=void 0;r?(r=JSON.parse(r),-1===r.paths.indexOf(t)&&(r.paths.push(t),this.depthSetPath(n,r)),e.forEach(function(e){s=r.paths.length,(o=e.value==s&&!e.status)&&(r.widget.forEach(function(t){(o=t.event===e.event&&!t.status)&&(t.status=e.status=!0,i.fireEvent(e))}),i.depthSetPath(n,r))})):this.depthSetPath(n,{paths:[t],widget:e})}},{key:"depthSetPath",value:function(e,t){window.sessionStorage.setItem(e,JSON.stringify(t))}},{key:"depthCheckPath",value:function(e){return window.sessionStorage.getItem(e)}},{key:"trigger_retention",value:function(e){var t=this,n=localStorage.getItem("pw-retentions")||0;if(sessionStorage.getItem("pw-session"))window.addEventListener("storage",function(e){"pw-session"===e.key&&localStorage.setItem("pw-session",sessionStorage.getItem("pw-session"))});else{window.addEventListener("storage",function(e){"pw-session"===e.key&&sessionStorage.setItem("pw-session",e.oldValue)});var i=t.createSessionId();localStorage.setItem("pw-session",i),setTimeout(function(){sessionStorage.getItem("pw-session")||(sessionStorage.setItem("pw-session",i),localStorage.setItem("pw-retentions",++n),e.forEach(function(e){e.status||n%e.value!=0||(e.status=!0,t.fireEvent(e))}),window.addEventListener("storage",function(e){"pw-session"===e.key&&localStorage.setItem("pw-session",sessionStorage.getItem("pw-session"))}))},1e3)}}},{key:"createSessionId",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}]),n}())}},{}],13:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){i(this,t),this.prefix=e.namespace.prefix,this.logo=e.elements.logo,this.name=e.elements.name}return r(t,[{key:"create",value:function(e){e&&(this.data=e,this.render())}},{key:"render",value:function(){var e=this.templates(this.data),t=document.body.querySelectorAll("."+this.prefix+"-buttons");if(this.clean(),e=e.replace(/\n/gi,"").replace(/\s{2,}/gi,""),t&&t.length)for(var n=0;n<t.length;n++)t[n].innerHTML=e;this.eventWidgets(),this.buttonAddRightClass()}},{key:"clean",value:function(){var t=this.prefix+"-"+this.data.properties.type;e.utilites.cleanWidget(t)}},{key:"destroy",value:function(t){e.utilites.destroyWidget(t)}},{key:"eventWidgets",value:function(){var t=this,n=this.data.triggers.type,i=this.data.properties.type,r=document.body.querySelectorAll("."+this.prefix+"-button");if(r&&r.length&&e.utilites.setStataData({event_id:"widget_request",source:i,trigger:n}),r&&r.length&&"default"===e.user.permission)for(var o=function(o){var s=r[o];s.addEventListener("click",function r(o){if(!t.isCopyRightLink(o,s)){o.preventDefault();s.classList.contains(t.prefix+"-permission--default")&&(e.utilites.setStataData({event_id:"widget_allow",source:i,trigger:n}),e.subscription.init({event:o,source:i,trigger:n,fn:r}))}})},s=0;s<r.length;s++)o(s)}},{key:"isCopyRightLink",value:function(e,t){var n=t.querySelector("."+this.prefix+"-button__copyright");return e.target&&n&&n.contains(e.target)}},{key:"buttonAddRightClass",value:function(){var e=document.body.querySelectorAll("."+this.prefix+"-button");if(e&&e.length)for(var t=0;t<e.length;t++){var n=e[t].offsetLeft,i=e[t].clientWidth,r=document.body.clientWidth-n-i;r<300&&n>300&&e[t].classList.add(this.prefix+"-button--right")}}},{key:"templates",value:function(t){var n=e.namespace.prefix;return this.mainTemplates(n,t)}},{key:"mainTemplates",value:function(t,n){var i=e.utilites.getPWUrl(n.properties.type,"widgets"),r='<svg xmlns="http://www.w3.org/2000/svg" class="'+t+'-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"/></svg>',o="circle"===n.settings.button_type?r:"powered by "+r+" Push.World",s="true"===e.IS_WHITE_LABEL?"":'<a id="'+t+'-button__link" class="'+t+'-button__copyright" target="_blank" href="'+i+'">'+o+"</a>";return'<div class="'+t+"-button "+t+"-button--"+n.settings.button_type+" "+t+"-button--"+n.settings.color+" "+t+"-permission--"+e.user.permission+'">\n                <svg version="1.1" class="'+t+'-button__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 525.153 525.153" width="80" xml:space="preserve" enable-background="new 0 0 525.153 525.153"><g><path d="M139.165 51.421l-35.776-35.864C43.413 61.202 3.742 132.185 0 212.402h50.174C53.916 145.992 88.051 87.766 139.165 51.421zM474.979 212.402h50.174c-3.742-80.217-43.413-151.2-103.586-196.845l-35.863 35.864C437.102 87.766 471.237 145.992 474.979 212.402zM425.592 224.984c0-77-53.391-141.463-125.424-158.487V49.408c0-20.787-16.761-37.614-37.592-37.614s-37.592 16.827-37.592 37.614v17.089C152.951 83.521 99.56 148.005 99.56 224.984v137.918l-50.152 50.108v25.076h426.336v-25.076l-50.152-50.108C425.592 362.902 425.592 224.984 425.592 224.984zM262.576 513.358c3.523 0 6.761-0.219 10.065-1.007 16.236-3.238 29.824-14.529 36.06-29.627 2.516-5.952 4.048-12.494 4.048-19.54H212.402C212.402 490.777 234.984 513.358 262.576 513.358z"/></g></svg>\n                <div>'+n.settings.text+'</div>\n                <div class="'+t+'-button__hint">\n                    <div class="'+t+'-button__hint--inner">\n                        <span class="'+t+'-button__hint--allow">Вы уже подписались на уведомления</span>\n                        <span class="'+t+'-button__hint--deny">Вы заблокировали возможность получения уведомлений</span>\n                    </div>\n                </div>\n                '+s+"\n            </div>"}}]),t}())}},{}],14:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){i(this,t),this.prefix=e.namespace.prefix,this.logo=e.elements.logo,this.name=e.elements.name}return r(t,[{key:"create",value:function(t){t&&(this.data=t,this.content=this.getContentLang(),this.keys=e.namespace.update+"-"+this.data.properties.type,this.render())}},{key:"render",value:function(){var t=this.templates(this.data),n=e.utilites.sessionViewGet(this.keys),i=document.body;n&&(this.clean(),t=t.replace(/\n/gi,"").replace(/\s{2,}/gi," "),i.insertAdjacentHTML("beforeEnd",t),this.eventWidgets())}},{key:"clean",value:function(){var t=this.prefix+"-"+this.data.properties.type;e.utilites.cleanWidget(t)}},{key:"destroy",value:function(t){e.utilites.destroyWidget(t)}},{key:"eventWidgets",value:function(){var t=this,n=this.data.triggers.type,i="notify-widget",r=document.getElementById(this.prefix+"-confirm"),o=document.getElementById(this.prefix+"-confirm__close"),s=document.getElementById(this.prefix+"-confirm__subscribe");e.utilites.setStataData({event_id:"widget_request",source:i,trigger:n}),o&&o.addEventListener("click",function(o){o.preventDefault(),e.utilites.setStataData({event_id:"widget_deny",source:i,trigger:n}),t.destroy(r),e.utilites.sessionViewSet(t.keys,t.data)}),s&&s.addEventListener("click",function(t){t.preventDefault(),e.utilites.setStataData({event_id:"widget_allow",source:i,trigger:n}),e.subscription.init({event:t,source:i,trigger:n})})}},{key:"getContentLang",value:function(){var t=e.user.lang,n=this.contentTranslate();return n[t]?n[t]:n.ru}},{key:"contentTranslate",value:function(){return{ru:{title:this.data.settings.title||"",text:this.data.settings.text||"",btnClose:"Спасибо, но нет",btnSubscribe:"Подписаться"},en:{title:"Please subscribe to get our notifications <br /> while you’re away",text:"We will send you only relevant and precise <br /> notifications just in time",btnClose:"Thank you but no",btnSubscribe:"Subscribe"}}}},{key:"isHideTemplates",value:function(e){return"link"===e.properties.styles.type?'style="display: none;"':""}},{key:"templates",value:function(t){var n=e.namespace.prefix,i=this.btnTemplates(),r=e.utilites.getPWUrl(t.properties.type,"widgets"),o=this.isHideTemplates(t);return this.mainTemplates(n,t,i,r,o)}},{key:"mainTemplates",value:function(t,n,i,r,o){var s="true"===e.IS_WHITE_LABEL?"":'<a id="'+t+'-confirm__link" target="_blank" href="'+r+'"> powered by <svg xmlns="http://www.w3.org/2000/svg" class="'+t+'-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"/></svg> PUSH.WORLD</a>';return'<div id="'+t+'-confirm" class="'+t+"-confirm "+t+"-confirm--"+n.settings.position+" "+t+'-widgets" '+o+'>\n                  <div class="'+t+'-confirm__wrapp">\n                      <div class="'+t+'-confirm__logo">\n                          <img class="'+t+'-confirm__img" src="'+this.logo+'" alt="'+this.name+'" />\n                      </div>\n                      <div class="'+t+'-confirm__content">\n                          <div class="'+t+'-confirm__title">'+this.content.title+'</div>\n                          <div class="'+t+'-confirm__text">'+this.content.text+'</div>\n                          <div class="'+t+'-confirm__btns">'+i+'</div>\n                      </div>\n                  </div>\n                  <div class="'+t+'-confirm__footer">\n                      '+s+"\n                  </div>\n              </div>"}},{key:"btnTemplates",value:function(){var t='<div id="'+this.prefix+'-confirm__close" class="'+this.prefix+"-confirm__btn "+this.prefix+'-confirm__btn--white">'+this.content.btnClose+"</div>",n='<div id="'+this.prefix+'-confirm__subscribe" class="'+this.prefix+"-confirm__btn "+this.prefix+'-confirm__btn--blue">'+this.content.btnSubscribe+"</div>";return~e.user.os.search(/Windows|windows/gi)?n+t:t+n}}]),t}())}},{}],15:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){i(this,t),this.prefix=e.namespace.prefix,this.logo=e.elements.logo,this.name=e.elements.name}return r(t,[{key:"create",value:function(e){e&&(this.data=e,this.render())}},{key:"render",value:function(){var e=this.templates(this.data),t=document.body;this.clean(),e=e.replace(/\n/gi,"").replace(/  /gi,""),t.insertAdjacentHTML("beforeEnd",e),this.eventWidgets()}},{key:"clean",value:function(){var t=this.prefix+"-"+this.data.properties.type;e.utilites.cleanWidget(t)}},{key:"destroy",value:function(t){e.utilites.destroyWidget(t)}},{key:"eventWidgets",value:function(){var t=this,n=this.data.triggers.type,i=this.data.properties.type,r=document.getElementById(this.prefix+"-label");e.utilites.setStataData({event_id:"widget_request",source:i,trigger:n}),r&&r.addEventListener("click",function(o){t.isCopyRightLink(o,r)||(o.preventDefault(),e.utilites.setStataData({event_id:"widget_allow",source:i,trigger:n}),e.subscription.init({event:o,source:i,trigger:n}))})}},{key:"isCopyRightLink",value:function(e,t){var n=t.querySelector("."+this.prefix+"-label__copyright");return e.target&&n&&n.contains(e.target)}},{key:"templates",value:function(t){var n=e.namespace.prefix;return this.mainTemplates(n,t)}},{key:"mainTemplates",value:function(t,n){var i=e.utilites.getPWUrl(n.properties.type,"widgets"),r="true"===e.IS_WHITE_LABEL?"":'<div class="'+t+'-label__copyright"><a id="'+t+'-label__link" target="_blank" href="'+i+'"> powered by <br><svg xmlns="http://www.w3.org/2000/svg" class="'+t+'-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"/></svg> Push.World</a>';return'<div id="'+t+'-label" class="'+t+"-label "+t+"-widgets "+t+"-label--"+n.settings.position+" "+t+"-label--"+n.settings.color+'"><svg version="1.1" class="'+t+'-label__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 525.153 525.153" width="80" xml:space="preserve" enable-background="new 0 0 525.153 525.153"><g><path d="M139.165 51.421l-35.776-35.864C43.413 61.202 3.742 132.185 0 212.402h50.174C53.916 145.992 88.051 87.766 139.165 51.421zM474.979 212.402h50.174c-3.742-80.217-43.413-151.2-103.586-196.845l-35.863 35.864C437.102 87.766 471.237 145.992 474.979 212.402zM425.592 224.984c0-77-53.391-141.463-125.424-158.487V49.408c0-20.787-16.761-37.614-37.592-37.614s-37.592 16.827-37.592 37.614v17.089C152.951 83.521 99.56 148.005 99.56 224.984v137.918l-50.152 50.108v25.076h426.336v-25.076l-50.152-50.108C425.592 362.902 425.592 224.984 425.592 224.984zM262.576 513.358c3.523 0 6.761-0.219 10.065-1.007 16.236-3.238 29.824-14.529 36.06-29.627 2.516-5.952 4.048-12.494 4.048-19.54H212.402C212.402 490.777 234.984 513.358 262.576 513.358z"/></g></svg>'+r+"</div>"}}]),t}())}},{}],16:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){i(this,t)}return r(t,[{key:"create",value:function(t){if(this.data=t,"https"===e.type&&t){this.keys=e.namespace.update+"-"+this.data.properties.type;e.utilites.sessionViewGet(this.keys)&&this.eventWidgets()}else"http"===e.type&&t&&this.eventWidgets()}},{key:"eventWidgets",value:function(){var t=this.data,n=t.triggers.type,i=t.properties.type,r=["widget_request"];e.utilites.debugConsole({name:"Debug (class Native -> eventWidgets)",params:{trigger:n,element:i,events:r},time:!0}),"custome"!==n&&r.forEach(function(t){e.utilites.setStataData({event_id:t,source:i,trigger:n})}),e.subscription.init({source:i,trigger:n,widgetData:this.data})}}]),t}())}},{}],17:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){i(this,t),this.prefix=e.namespace.prefix,this.name=e.elements.name,this.logo=e.elements.logo}return r(t,[{key:"create",value:function(t){t&&(this.data=t,this.keys=e.namespace.update+"-"+this.data.properties.type,this.isSupportNativePermission()?this.renderNative():this.renderPseudoNative())}},{key:"renderNative",value:function(){e.utilites.sessionViewGet(this.keys)&&(this.clean(),this.addIframe())}},{key:"renderPseudoNative",value:function(){this.keys=e.namespace.update+"-"+this.data.properties.type,this.browser=e.user.browser.replace(" ","-").toLowerCase(),this.os=e.user.os.replace(" ","-").toLowerCase(),this.content=this.getContentLang();var t=this.templates(this.data),n=e.utilites.sessionViewGet(this.keys),i=document.body;n&&(this.clean(),t=t.replace(/\n|\r\n/gi,"").replace(/\s{2,}/gi,""),i.insertAdjacentHTML("beforeEnd",t),this.eventWidgets(),this.addSystemsClasses())}},{key:"isSupportNativePermission",value:function(){var e=window.navigator.userAgent,t=void 0;return!/Chrome/.test(e)||!(t=e.match(/(Chrome)\/(\d+)\./)[2])||parseInt(t)<60}},{key:"addIframe",value:function(){var t=this,n=this.data.triggers.type,i=e.utilites.createIframe({src:e.api.landing+"/?source=notify&trigger="+n+"&type=iframe",id:"pw-notify-iframe"});i.addEventListener("load",function(){t.messageListener(i)},!1)}},{key:"messageListener",value:function(t){var n=new MessageChannel;t.contentWindow.postMessage("pw-init",""+e.api.landing,[n.port2]),n.port1.onmessage=this.handleMessage.bind(this)}},{key:"handleMessage",value:function(t){var n=this.data.triggers.type,i="notify";switch(e.utilites.debugConsole({name:"Debug (class Notify -> messageListener)",params:[{trigger:n,data:t.data}],time:!0}),t.data){case"ready":e.utilites.setStataData({event_id:"widget_request",source:i,trigger:n});break;case"granted":e.utilites.setStataData({event_id:"widget_allow",source:i,trigger:n}),e.utilites.setStorage("pw-notify-permission",JSON.stringify({status:"allow",date:e.utilites.dateNow(),trigger:n,view:!1,attempts:0,lastview:""})),e.utilites.customEvents("landing-message"),e.utilites.publicEvents("pw:subscribe:allow-notify",{permission:"allow"}),e.utilites.httpNotify(n),e.utilites.destroyWidgetAll({},"allow");break;case"default":e.utilites.setStataData({event_id:"widget_default",source:i,trigger:n}),e.utilites.setStataData({event_id:"permission_default",source:i,trigger:n}),e.utilites.publicEvents("pw:subscribe:"+t.data,{permission:t.data}),e.utilites.sessionViewSet(this.keys,this.data);break;case"denied":e.utilites.setStataData({event_id:"widget_deny",source:i,trigger:n}),e.utilites.setStataData({event_id:"permission_denied",source:i,trigger:n}),e.utilites.publicEvents("pw:subscribe:deny",{permission:"deny"}),e.utilites.customEvents("landing-message"),e.utilites.destroyWidgetAll({},"deny");break;case"already_granted":e.utilites.customEvents("landing-message"),e.utilites.destroyWidgetAll({},"allow"),e.utilites.httpNotify(n)}}},{key:"eventWidgets",value:function(){var t=this,n=this.data.triggers.type,i="notify",r=document.getElementById(this.prefix+"-notify"),o=r.querySelectorAll("."+this.prefix+"-notify__close-js"),s=r.querySelector("#"+this.prefix+"-notify__subscribe");e.utilites.setStataData({event_id:"widget_request",source:i,trigger:n}),o&&Array.from(o).forEach(function(o){o.addEventListener("click",function(o){o.preventDefault(),e.utilites.setStataData({event_id:"widget_deny",source:i,trigger:n}),t.destroy(r),e.utilites.sessionViewSet(t.keys,t.data)})}),s&&s.addEventListener("click",function(t){t.preventDefault(),e.utilites.setStataData({event_id:"widget_allow",source:i,trigger:n}),e.subscription.init({event:t,source:i,trigger:n})})}},{key:"getContentLang",value:function(){var t=e.user.lang,n=this.contentTranslate();return n[t]?n[t]:n.ru}},{key:"contentTranslate",value:function(){var e="yandex"===this.browser||"opera"===this.browser?window.location.origin:window.location.host;return{ru:{title:{chrome:e+" запрашивает разрешение на:",yandex:"Пуш-уведомления",opera:"Запрос привилегий для отображения уведомлений на рабочем столе",android:{chrome:"Сайт "+e+" запрашивает разрешение на отправку уведомлений"}},text:{chrome:"Показывать оповещения",yandex:"Сайт <b>"+e+"</b><br> запрашивает разрешение отправлять вам<br> пуш-уведомления",opera:"Сайт "+e+" запрашивает разрешение на отображение уведомлений на рабочем столе. Разрешить?"},btnClose:{chrome:"Блокировать",yandex:"Блокировать",opera:"Отклонить"},btnSubscribe:{chrome:"Разрешить",yandex:"Разрешить",opera:"Разрешить"}},en:{title:{chrome:e+" wants to:",yandex:e+" wants to: Show notifications",android:{chrome:"Website "+e+" wants to show notification"}},text:{chrome:"Show notifications",yandex:""},btnClose:{chrome:"Block",yandex:"Block"},btnSubscribe:{chrome:"Allow",yandex:"Allow"}}}}},{key:"addSystemsClasses",value:function(){var e="pwl-os--"+this.os,t="pwl-browser--"+this.browser;document.documentElement.classList.add(e),document.documentElement.classList.add(t)}},{key:"templates",value:function(t){var n=e.namespace.prefix,i=this.contentTranslate(),r=e.utilites.getPWUrl(t.properties.type,"widgets");return this.mainTemplates(n,i,r)}},{key:"mainTemplates",value:function(e,t,n){return'<div id="'+e+'-notify" class="'+e+"-notify "+e+'-widgets">\n                <div class="'+e+'-notify__wrapp">\n                    <div class="'+e+'-notify__content">'+this.contentTemplates(e,t,n)+'</div>\n                    <div class="'+e+"-notify__close "+e+'-notify__close-js">'+this.icons().close+"</div>\n                </div>\n            </div>"}},{key:"contentTemplates",value:function(e,t,n){var i=this.browser,r=this.os,o=this.icons(e),s=this.btnTemplates(e),a="android"===r?r:"desktop",u={chrome:{desktop:'<div class="'+e+'-notify__title">'+this.content.title.chrome+"</div>\n                        "+o.bell+'\n                        <div class="'+e+'-notify__text">'+this.content.text.chrome+'</div>\n                        <div class="'+e+'-notify__btns">'+s+"</div>",android:'<div class="'+e+'-notify__title">'+this.content.title.android.chrome+"</div>\n                        "+o.bell+'\n                        <div class="'+e+'-notify__btns">'+s+"</div>"},yandex:{desktop:'<div class="'+e+'-notify__title">'+this.content.title.yandex+"</div>\n                        "+o.chat+'\n                        <div class="'+e+'-notify__text">'+this.content.text.yandex+'</div>\n                        <div class="'+e+'-notify__btns">'+s+'</div>\n                        <a href="'+n+'" target="_blank" class="'+e+'-notify__help">?</a>',android:'<div class="'+e+'-notify__title">'+this.content.title.android.chrome+"</div>\n                            "+o.bell+'\n                        <div class="'+e+'-notify__btns">'+s+"</div>"},opera:{desktop:'<div class="'+e+'-notify__title">'+this.content.title.opera+'</div>\n                        <div class="'+e+'-notify__text">'+this.content.text.opera+'</div>\n                        <div class="'+e+'-notify__btns">'+s+"</div>",android:""}};return u[i]?u[i][a]:u.chrome.desktop}},{key:"btnTemplates",value:function(e){var t=this.browser,n=this.os,i='<div id="'+e+'-notify__close" class="'+e+"-notify__btn "+e+'-notify__close-js">'+this.content.btnClose[t]+"</div>",r='<div id="'+e+'-notify__subscribe" class="'+e+'-notify__btn">'+this.content.btnSubscribe[t]+"</div>";return"windows"===n||"yandex"===t?r+i:i+r}},{key:"icons",value:function(e){return{bell:'<svg version="1.1" class="'+e+'-notify__bell" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 32.409 32.409" style="enable-background:new 0 0 32.409 32.409;" xml:space="preserve">\n<g><path d="M27.568,20.168V13.63c-0.021-5.043-3.48-9.862-8.654-11.088c0,0-0.17-2.542-2.711-2.542c-2.58,0-2.709,2.47-2.709,2.47\n    C8.322,3.69,4.906,8.587,4.876,13.63v6.33c0,3.094-2.033,3.626-4.443,6.146h31.543C29.566,23.586,27.568,23.263,27.568,20.168z\n     M16.203,32.409c2.771,0,5.088-2.212,5.713-5.043H10.492C11.117,30.197,13.435,32.409,16.203,32.409z"/></svg>',chat:'<svg version="1.1" class="'+e+'-notify__chat" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 490 490" style="enable-background:new 0 0 490 490;" xml:space="preserve"><g><path d="M410.103,458.74L281.861,353.511H105.453C47.313,353.511,0,305.166,0,245.755V139.016C0,79.606,47.313,31.26,105.453,31.26\nh279.094C442.687,31.26,490,79.606,490,139.016v106.739c0,49.99-33.511,92.697-79.897,104.511V458.74z M105.453,61.886\nc-41.257,0-74.828,34.603-74.828,77.131v106.739c0,42.528,33.571,77.131,74.828,77.131h187.354l86.671,71.104v-70.043l13.518-1.6\nc37.848-4.456,66.379-37.384,66.379-76.592V139.016c0-42.528-33.571-77.131-74.828-77.131H105.453z"/></g></svg>',close:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="10px" height="10px" viewBox="0 0 357 357" style="enable-background:new 0 0 357 357;" xml:space="preserve"><g><g id="close"><polygon points="357,35.7 321.3,0 178.5,142.8 35.7,0 0,35.7 142.8,178.5 0,321.3 35.7,357 178.5,214.2 321.3,357 357,321.3 214.2,178.5 "/></g></svg>'}}},{key:"clean",value:function(){var t=this.prefix+"-"+this.data.properties.type;e.utilites.cleanWidget(t)}},{key:"destroy",value:function(t){e.utilites.destroyWidget(t)}}]),t}())}},{}],18:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){i(this,t),this.prefix=e.namespace.prefix,this.logo=e.elements.logo,this.name=e.elements.name}return r(t,[{key:"create",value:function(t){t&&(this.data=t,this.content=this.getContentLang(),this.keys=e.namespace.update+"-"+this.data.properties.type,this.render())}},{key:"render",value:function(){var t=this.templates(this.data),n=e.utilites.sessionViewGet(this.keys),i=document.body;n&&(this.clean(),t=t.replace(/\n/gi,"").replace(/  /gi,""),i.insertAdjacentHTML("beforeEnd",t),this.resize(i),this.eventWidgets())}},{key:"clean",value:function(){var t=this.prefix+"-"+this.data.properties.type;e.utilites.cleanWidget(t)}},{key:"destroy",value:function(t){e.utilites.destroyWidget(t)}},{key:"resize",value:function(e){var t=window.innerHeight||html.clientHeight||e.clientHeight;document.getElementsByClassName(this.prefix+"-popup__inner")[0].offsetHeight>t&&!e.classList.contains(this.prefix+"-popup__active")&&e.classList.add("pw-popup__active")}},{key:"eventWidgets",value:function(){var t=this,n=this.data.triggers.type,i=this.data.properties.type,r=document.getElementById(this.prefix+"-popup"),o=document.getElementById(this.prefix+"-popup__close"),s=document.getElementById(this.prefix+"-popup__subscribe");e.utilites.setStataData({event_id:"widget_request",source:i,trigger:n}),o&&o.addEventListener("click",function(o){o.preventDefault(),e.utilites.setStataData({event_id:"widget_deny",source:i,trigger:n}),t.destroy(r),e.utilites.sessionViewSet(t.keys,t.data)}),s&&s.addEventListener("click",function(t){t.preventDefault(),e.utilites.setStataData({event_id:"widget_allow",source:i,trigger:n}),e.subscription.init({event:t,source:i,trigger:n})})}},{key:"getContentLang",value:function(){var t=e.user.lang,n=this.contentTranslate();return n[t]?n[t]:n.ru}},{key:"contentTranslate",value:function(){return{ru:{title:this.data.settings.title||"",text:this.data.settings.text||"",btnSubscribe:"Подписаться"},en:{title:"Please subscribe to get our notifications <br /> while you’re away",text:"We will send you only relevant and precise <br /> notifications just in time",btnSubscribe:"Subscribe"}}}},{key:"isHideTemplates",value:function(e){return"link"===e.properties.styles.type?'style="display: none;"':""}},{key:"templates",value:function(e){var t=this.prefix,n=this.isHideTemplates(e);return this.mainTemplates(t,e,n)}},{key:"mainTemplates",value:function(t,n,i){var r=e.utilites.getPWUrl(n.properties.type,"widgets"),o="true"===e.IS_WHITE_LABEL?"":'<div class="'+t+'-popup__copyright"><a id="'+t+'-popup__link" target="_blank" href="'+r+'"> powered by <svg xmlns="http://www.w3.org/2000/svg" class="'+t+'-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"/></svg> PUSH.WORLD</a></div>';return'<div id="'+t+'-popup" class="'+t+"-popup "+t+'-widgets">\n                <div class="'+t+'-popup__block">\n                    <div class="'+t+'-popup__pre">\n                        <div class="'+t+'-popup__wrapp">\n                            <div class="'+t+'-popup__inner">\n                                <div class="'+t+'-popup__header">\n                                    <div class="'+t+'-popup__logo">\n                                        <img class="'+t+'-popup__img" src="'+this.logo+'" alt="'+this.name+'" />\n                                    </div>\n                                </div>\n                                <div class="'+t+'-popup__content">\n                                    <div class="'+t+'-popup__title">'+this.content.title+'</div>\n                                    <div class="'+t+'-popup__text">'+this.content.text+'</div>\n                                    <div id="'+t+'-popup__subscribe" class="'+t+'-popup__button">'+this.content.btnSubscribe+'</div>\n                                </div>\n                                <div id="'+t+'-popup__close" class="'+t+'-popup__close"></div>\n                                '+o+'\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="'+t+'-popup__fade"></div>\n            </div>'}}]),t}())}},{}],19:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.exports=function(e){return new(function(){function t(){i(this,t),this.prefix=e.namespace.prefix,this.logo=e.elements.logo,this.name=e.elements.name}return r(t,[{key:"create",value:function(t){var n=this;t&&(this.data=t,e.utilites.detectPrivateMode(function(e){e||n.render()}))}},{key:"render",value:function(){var e=this.templates(this.data),t=document.body;this.clean(),e=e.replace(/\r\n|\r|\n/gi,"").replace(/\s{2,}/gi," "),t.insertAdjacentHTML("beforeEnd",e),this.eventWidgets()}},{key:"clean",value:function(){var t=this.prefix+"-unblock";e.utilites.cleanWidget(t)}},{key:"destroy",value:function(t){e.utilites.destroyWidget(t)}},{key:"eventWidgets",value:function(){var t=this,n=document.getElementById(this.prefix+"-unblock"),i=n.querySelector("."+this.prefix+"-unblock__bubble"),r=n.querySelector("."+this.prefix+"-unblock__button"),o=this.data.triggers.type,s=this.data.properties.type,a=void 0;e.utilites.setStataData({event_id:"unblock_widget_view",source:s,trigger:o}),n&&r&&i&&(n.addEventListener("mouseover",function(e){e.preventDefault(),clearTimeout(a),i.classList.add(t.prefix+"-active")}),n.addEventListener("mouseleave",function(e){e.preventDefault(),clearTimeout(a),a=setTimeout(function(){i.classList.remove(t.prefix+"-active")},1e3)}),r.addEventListener("click",function(n){n.preventDefault(),e.utilites.setStataData({event_id:"unblock_widget_click",source:s,trigger:o}),t.showInstruction(n)}))}},{key:"showInstruction",value:function(t){var n=this.data.triggers.type,i=this.data.properties.type;if("https"===e.type){var r=e.namespace.prefix,o=e.getSystems(),s=o.os.toLowerCase().replace(/\s{1,}/gi,""),a=o.browser.toLowerCase().replace(/\s{1,}/gi,"");if(document.body.querySelector("."+r+"-unblock__instruction"))return;var u=this.instructionTemplate(r,s,a);document.body.insertAdjacentHTML("beforeEnd",u),this.closeListener(r),window.localStorage.setItem("pw-unblock_view",Date.now())}else e.subscription.init({event:t,source:i,trigger:n,type:"unblock"});e.utilites.setStataData({event_id:"unblock_manual_view",source:i,trigger:n})}},{key:"closeListener",value:function(e){var t=this,n=document.getElementById(e+"-unblock__close"),i=document.getElementById(e+"-unblock__instruction").querySelector("."+e+"-unblock__overlay");n&&i&&(n.addEventListener("click",function(n){t.closeHandler(n,e)}),i.addEventListener("click",function(n){t.closeHandler(n,e)}))}},{key:"closeHandler",value:function(t,n){var i=this.data.triggers.type,r=this.data.properties.type;t.preventDefault(),this.destroyInstruction(n),e.utilites.setStataData({event_id:"unblock_manual_close",source:r,trigger:i})}},{key:"destroyInstruction",value:function(e){var t=document.getElementById(e+"-unblock__instruction");t&&t.remove()}},{key:"templates",value:function(t){var n=e.namespace.prefix;return this.mainTemplates(n,t)}},{key:"mainTemplates",value:function(t,n){var i=e.utilites.getPWUrl(n.properties.type,"widgets"),r='<svg xmlns="http://www.w3.org/2000/svg" class="'+t+'-icon--logo" width="15" height="15" viewBox="0 0 72 72"><path d="M36 0a36 36 0 1 0 35.99 36A36 36 0 0 0 36 0zm-.08 49.27a16.577 16.577 0 0 1-3.73-.423l-1.37 5.793h5.09l-1.13 4.757h-9.95l2.91-12.3 1.17-4.916 3.87-16.293h4.86l-4.35 18.328a11.693 11.693 0 1 0-8.89-13.383 2.38 2.38 0 0 1-4.7-.755 16.45 16.45 0 0 1 15.33-13.68l.49-2.07a2.37 2.37 0 0 1 4.61 1.093l-.34 1.413a16.45 16.45 0 0 1-3.87 32.437z"/></svg>',o="true"===e.IS_WHITE_LABEL?"":'<a id="'+t+'-unblock__link" class="'+t+'-unblock__copyright" target="_blank" href="'+i+'">'+r+"</a>";return'<div id="'+t+'-unblock" class="'+t+"-unblock "+t+"-widgets "+t+"-unblock--"+n.settings.position+'"><svg version="1.1" class="'+t+'-unblock__icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 525.153 525.153" width="80" xml:space="preserve" enable-background="new 0 0 525.153 525.153"><g><path d="M139.165 51.421l-35.776-35.864C43.413 61.202 3.742 132.185 0 212.402h50.174C53.916 145.992 88.051 87.766 139.165 51.421zM474.979 212.402h50.174c-3.742-80.217-43.413-151.2-103.586-196.845l-35.863 35.864C437.102 87.766 471.237 145.992 474.979 212.402zM425.592 224.984c0-77-53.391-141.463-125.424-158.487V49.408c0-20.787-16.761-37.614-37.592-37.614s-37.592 16.827-37.592 37.614v17.089C152.951 83.521 99.56 148.005 99.56 224.984v137.918l-50.152 50.108v25.076h426.336v-25.076l-50.152-50.108C425.592 362.902 425.592 224.984 425.592 224.984zM262.576 513.358c3.523 0 6.761-0.219 10.065-1.007 16.236-3.238 29.824-14.529 36.06-29.627 2.516-5.952 4.048-12.494 4.048-19.54H212.402C212.402 490.777 234.984 513.358 262.576 513.358z"></g></svg>'+this.bubbleTemplate(t)+o+"</div>"}},{key:"bubbleTemplate",value:function(e){return'<div class="'+e+'-unblock__bubble">\n                <div class="'+e+'-unblock__text">Вы заблокировали возможность получать пуш уведомления</div>\n                <div class="'+e+'-unblock__button">Разблокировать</div>\n            </div>'}},{key:"instructionTemplate",value:function(e,t,n){var i={windows:{chrome:"1vt40YgwoBM",firefox:"Djfa2HPWDU8",yandex:"MHbOHXi0qIc"},macos:{chrome:"xEgXiObI8ZE",firefox:"KmxUfYpPZEc",yandex:"nbRoEi_-5PY"},android:{chrome:"tjPSsMcXo0A",firefox:"bySvuP6EJPA",yandex:"TGgGUj9YUpk"}},r=t in i?t:"windows",o=n in i[r]?n:"chrome",s="android"===r?"180%":"yandex"===o?"56%":"74%",a=i[r][o];return'<div id="'+e+'-unblock__instruction" class="'+e+'-unblock__instruction">\n                        <div class="'+e+'-unblock__overlay"></div>\n                        <div class="'+e+'-unblock__video--wrap">\n                            <div class="'+e+'-unblock__video">\n                                <div id="'+e+'-unblock__close" class="'+e+'-unblock__close"></div>\n                                <div style="width:100%;height:0px;position:relative;padding-bottom:'+s+';">\n                                    <iframe src="https://www.youtube.com/embed/'+a+"?loop=1&amp;playlist="+a+'" frameborder="0" width="100%" height="100%" allowfullscreen style="width:100%;height:100%;position:absolute;left:0px;top:0px;overflow:hidden;"></iframe>\n                                </div>\n                                <div class="'+e+'-unblock__text">Чтобы разблокировать подписку, выполните с этим сайтом действия, как на видео</div>\n                            </div>\n                        </div>\n                    </div>'}}]),t}())}},{}],20:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=window.pw||{};!function(t,n){s.version="1.5.3",s.core=function(t,n){var s=e("modules/core"),a={},u="http",c="false",l=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u,c))}return o(t,e),t}(s);return a.init=function(){return new l},a}(),s.core.init()}(window,document)},{"modules/core":3}]},{},[20]);